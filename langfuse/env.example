# Langfuse Docker Compose Environment Variables
# Copy this file to .env and update the values marked with # CHANGEME
# Generate secure values for production use

# ============================================================================
# Core Langfuse Configuration
# ============================================================================
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=mysecret # CHANGEME: Generate a secure random string
SALT=mysalt # CHANGEME: Generate a secure random string
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000 # CHANGEME: Generate via `openssl rand -hex 32`

# ============================================================================
# Database Configuration
# ============================================================================
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/postgres # CHANGEME: Update credentials
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres # CHANGEME: Use a strong password
POSTGRES_DB=postgres
POSTGRES_VERSION=17

# ============================================================================
# ClickHouse Configuration
# ============================================================================
CLICKHOUSE_MIGRATION_URL=clickhouse://clickhouse:9000
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=clickhouse # CHANGEME: Use a strong password
CLICKHOUSE_CLUSTER_ENABLED=false

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_AUTH=myredissecret # CHANGEME: Use a strong password
REDIS_TLS_ENABLED=false
REDIS_TLS_CA=/certs/ca.crt
REDIS_TLS_CERT=/certs/redis.crt
REDIS_TLS_KEY=/certs/redis.key

# ============================================================================
# MinIO/S3 Configuration
# ============================================================================
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=miniosecret # CHANGEME: Use a strong password

# S3 Event Upload Configuration
LANGFUSE_S3_EVENT_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_EVENT_UPLOAD_REGION=auto
LANGFUSE_S3_EVENT_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY=miniosecret # CHANGEME: Use a strong password
LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT=http://minio:9000
LANGFUSE_S3_EVENT_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_EVENT_UPLOAD_PREFIX=events/

# S3 Media Upload Configuration
LANGFUSE_S3_MEDIA_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_MEDIA_UPLOAD_REGION=auto
LANGFUSE_S3_MEDIA_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_MEDIA_UPLOAD_SECRET_ACCESS_KEY=miniosecret # CHANGEME: Use a strong password
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://localhost:9090
LANGFUSE_S3_MEDIA_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_MEDIA_UPLOAD_PREFIX=media/

# S3 Batch Export Configuration
LANGFUSE_S3_BATCH_EXPORT_ENABLED=false
LANGFUSE_S3_BATCH_EXPORT_BUCKET=langfuse
LANGFUSE_S3_BATCH_EXPORT_PREFIX=exports/
LANGFUSE_S3_BATCH_EXPORT_REGION=auto
LANGFUSE_S3_BATCH_EXPORT_ENDPOINT=http://minio:9000
LANGFUSE_S3_BATCH_EXPORT_EXTERNAL_ENDPOINT=http://localhost:9090
LANGFUSE_S3_BATCH_EXPORT_ACCESS_KEY_ID=minio
LANGFUSE_S3_BATCH_EXPORT_SECRET_ACCESS_KEY=miniosecret # CHANGEME: Use a strong password
LANGFUSE_S3_BATCH_EXPORT_FORCE_PATH_STYLE=true

# Azure Blob Storage (Alternative to S3)
LANGFUSE_USE_AZURE_BLOB=false

# ============================================================================
# Langfuse Feature Flags
# ============================================================================
TELEMETRY_ENABLED=true
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES=true

# ============================================================================
# Performance Tuning (Optional)
# ============================================================================
# LANGFUSE_INGESTION_QUEUE_DELAY_MS=
# LANGFUSE_INGESTION_CLICKHOUSE_WRITE_INTERVAL_MS=

# ============================================================================
# Email Configuration (Optional)
# ============================================================================
# EMAIL_FROM_ADDRESS=
# SMTP_CONNECTION_URL=

# ============================================================================
# Initial Setup (Optional - for first-time setup only)
# ============================================================================

# Headless Initialization
# Variables to automatically create organization, project, and user on first run.

# LANGFUSE_INIT_ORG_ID=my-org
# LANGFUSE_INIT_ORG_NAME=My Organization
# LANGFUSE_INIT_PROJECT_ID=my-project
# LANGFUSE_INIT_PROJECT_NAME=My Project
# LANGFUSE_INIT_PROJECT_PUBLIC_KEY=pk-lf-...
# LANGFUSE_INIT_PROJECT_SECRET_KEY=sk-lf-...
# LANGFUSE_INIT_USER_EMAIL=admin@example.com
# LANGFUSE_INIT_USER_NAME=Admin User
# LANGFUSE_INIT_USER_PASSWORD=secure-password

